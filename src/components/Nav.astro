---
const { current = '' } = Astro.props;
---
<nav class="border-b bg-white dark:bg-slate-900">
  <div class="container flex items-center justify-between h-16">
    <a href="/" class="flex items-center gap-3">
      <div class="w-9 h-9 bg-primary-500 rounded flex items-center justify-center text-white font-bold">M</div>
      <span class="font-semibold text-lg">MySite</span>
    </a>

    <div class="hidden md:flex items-center gap-6">
      <a href="/" class="text-sm muted">Home</a>
      <a href="/services" class="text-sm muted">Services</a>
      <a href="/blog" class="text-sm muted">Blog</a>
      <a href="/about" class="text-sm muted">About</a>
      <a href="/contact" class="text-sm muted">Contact</a>
      <button id="theme-toggle" class="ml-2 px-3 py-1 border rounded text-sm">Toggle</button>
    </div>

    <div class="md:hidden">
      <details class="relative">
        <summary class="list-none cursor-pointer px-2 py-1">â˜°</summary>
        <div class="absolute right-0 mt-2 bg-white dark:bg-slate-800 border rounded shadow-md w-48">
          <a class="block px-4 py-2 muted" href="/">Home</a>
          <a class="block px-4 py-2 muted" href="/services">Services</a>
          <a class="block px-4 py-2 muted" href="/blog">Blog</a>
          <a class="block px-4 py-2 muted" href="/about">About</a>
          <a class="block px-4 py-2 muted" href="/contact">Contact</a>
          <button id="theme-toggle-mobile" class="w-full text-left px-4 py-2 muted">Toggle theme</button>
        </div>
      </details>
    </div>
  </div>

  <script>
    (function(){
      const setDark = (d) => {
        if(d) document.documentElement.classList.add('dark');
        else document.documentElement.classList.remove('dark');
      }
      const saved = localStorage.getItem('theme');
      if(saved) setDark(saved === 'dark');
      document.getElementById('theme-toggle')?.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
      document.getElementById('theme-toggle-mobile')?.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    })();
  </script>
</nav>
